function module(t,e,n){var o,i,l,s,c,u,r,a,f;n.link("@babel/runtime/regenerator",{default:function(t){o=t}},0),n.link("meteor/meteor",{Meteor:function(t){i=t}},0),n.link("meteor/kadira:flow-router",{FlowRouter:function(t){l=t}},1),n.link("meteor/templating",{Template:function(t){s=t}},2),n.link("meteor/reactive-var",{ReactiveVar:function(t){c=t}},3),n.link("../../../../ui-utils",{modal:function(t){u=t}},4),n.link("../../../../utils/client",{t:function(t){r=t},handleError:function(t){a=t},APIClient:function(t){f=t}},5),n.link("./livechatCustomFields.html");var m=50;s.livechatCustomFields.helpers({customFields:function(){return s.instance().customFields.get()},onTableScroll:function(){var t=s.instance();return function(e){if(!(e.offsetHeight+e.scrollTop<e.scrollHeight-100)){var n=t.customFields.get();if(!(t.total.get()<=n.length))return t.offset.set(t.offset.get()+m)}}}}),s.livechatCustomFields.events({"click .remove-custom-field":function(t,e){var n=this;t.preventDefault(),t.stopPropagation(),u.open({title:r("Are_you_sure"),type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:r("Yes"),cancelButtonText:r("Cancel"),closeOnConfirm:!1,html:!1},(function(){i.call("livechat:removeCustomField",n._id,(function(t){if(t)return a(t);e.offset.set(0),u.open({title:r("Removed"),text:r("Field_removed"),type:"success",timer:1e3,showConfirmButton:!1})}))}))},"click .custom-field-info":function(t){t.preventDefault(),l.go("livechat-customfield-edit",{_id:this._id})}}),s.livechatCustomFields.onCreated((function(){var t=this;this.customFields=new c([]),this.offset=new c(0),this.total=new c(0),this.autorun(function(){function e(){var e,n,i,l;return o.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:return e=t.offset.get(),s.next=3,o.awrap(f.v1.get("livechat/custom-fields?count="+m+"&offset="+e));case 3:n=s.sent,i=n.customFields,l=n.total,0===e?t.customFields.set(i):t.customFields.set(t.customFields.get().concat(i)),t.total.set(l);case 8:case"end":return s.stop()}}return s}(),null,null,null,Promise)}return e}())}))}

