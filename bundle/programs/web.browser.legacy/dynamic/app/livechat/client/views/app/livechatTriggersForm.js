function module(e,n,t){var i,r,a,c,s,o,u,g,l;t.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),t.link("meteor/meteor",{Meteor:function(e){r=e}},0),t.link("meteor/reactive-var",{ReactiveVar:function(e){a=e}},1),t.link("meteor/kadira:flow-router",{FlowRouter:function(e){c=e}},2),t.link("meteor/templating",{Template:function(e){s=e}},3),t.link("toastr",{default:function(e){o=e}},4),t.link("../../../../utils",{t:function(e){u=e},handleError:function(e){g=e}},5),t.link("./livechatTriggersForm.html"),t.link("../../../../utils/client",{APIClient:function(e){l=e}},6),s.livechatTriggersForm.helpers({name:function(){var e=s.instance().trigger.get();return e&&e.name},description:function(){var e=s.instance().trigger.get();return e&&e.description},enabled:function(){var e=s.instance().trigger.get();return e&&e.enabled},runOnce:function(){var e=s.instance().trigger.get();return e&&e.runOnce||!1},conditions:function(){var e=s.instance().trigger.get();return e?e.conditions:[]},actions:function(){var e=s.instance().trigger.get();return e?e.actions:[]}}),s.livechatTriggersForm.events({"submit #trigger-form":function(e,n){e.preventDefault();var t=n.$("button.save"),i=t.html();t.html(u("Saving"));var a={_id:c.getParam("_id"),name:n.$("input[name=name]").val(),description:n.$("input[name=description]").val(),enabled:"1"===n.$("input[name=enabled]:checked").val(),runOnce:"1"===n.$("input[name=runOnce]:checked").val(),conditions:[],actions:[]};$(".each-condition").each((function(){a.conditions.push({name:$(".trigger-condition",this).val(),value:$("."+$(".trigger-condition",this).val()+"-value").val()})})),$(".each-action").each((function(){if("send-message"===$(".trigger-action",this).val()){var e={sender:$("[name=send-message-sender]",this).val(),msg:$("[name=send-message-msg]",this).val()};"custom"===e.sender&&(e.name=$("[name=send-message-name]",this).val()),a.actions.push({name:$(".trigger-action",this).val(),params:e})}else a.actions.push({name:$(".trigger-action",this).val(),value:$("."+$(".trigger-action",this).val()+"-value").val()})})),r.call("livechat:saveTrigger",a,(function(e){if(t.html(i),e)return g(e);c.go("livechat-triggers"),o.success(u("Saved"))}))},"click button.back":function(e){e.preventDefault(),c.go("livechat-triggers")}}),s.livechatTriggersForm.onCreated(function(){function e(){var e,n,t;return i.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:if(this.trigger=new a({}),!(e=c.getParam("_id"))){r.next=8;break}return r.next=5,i.awrap(l.v1.get("livechat/triggers/"+e));case 5:n=r.sent,t=n.trigger,this.trigger.set(t);case 8:case"end":return r.stop()}}return r}(),null,this,null,Promise)}return e}())}

